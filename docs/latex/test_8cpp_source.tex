\hypertarget{test_8cpp_source}{}\section{test.\+cpp}
\label{test_8cpp_source}\index{/home/soobin/\+Documents/\+Sandbox/\+I\+G\+V/test/test.\+cpp@{/home/soobin/\+Documents/\+Sandbox/\+I\+G\+V/test/test.\+cpp}}

\begin{DoxyCode}
00001 
00002 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{"test.hpp"}
00003 
00004 \textcolor{keyword}{using} \textcolor{keyword}{namespace} std;
00005 \textcolor{keyword}{using} \textcolor{keyword}{namespace} cv;
00006 \textcolor{keyword}{using} \textcolor{keyword}{namespace} igv;
00007 
00008 Test::Test(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *logfile) : logfile(logfile) \{\}
00009 
00010 Test::~Test() \{ logfile.close(); \}
00011 
00012 \textcolor{keywordtype}{bool} Test::CameraTest()
00013 \{
00014 
00015   \textcolor{keywordtype}{bool} Passed = \textcolor{keyword}{true};
00016 
00017   logfile << \textcolor{stringliteral}{"Creating Lane Camera Object \(\backslash\)n"};
00018   Camera cam1(LANECAMPORT);
00019 
00020   logfile << \textcolor{stringliteral}{"Taking a Picture \(\backslash\)n"};
00021   cam1.Capture();
00022 
00023   logfile << \textcolor{stringliteral}{"Retrieving the Image \(\backslash\)n"};
00024   Mat testimage = cam1.GetImage();
00025 
00026   logfile << \textcolor{stringliteral}{"Image Specs: \(\backslash\)n"}
00027           << \textcolor{stringliteral}{"========================="}
00028           << \textcolor{stringliteral}{"Is Empty:       "} << testimage.empty() << endl
00029           << \textcolor{stringliteral}{"Dimensionality: "} << testimage.dims << endl
00030           << \textcolor{stringliteral}{"Pixel Format:   "} << testimage.depth() << endl
00031           << \textcolor{stringliteral}{"Size:           "} << testimage.size << endl
00032           << endl;
00033 
00034   \textcolor{keywordflow}{if} (testimage.empty() || !testimage.size)
00035     Passed = \textcolor{keyword}{false};
00036   \textcolor{keywordflow}{else}
00037     Passed = \textcolor{keyword}{true};
00038 
00039   logfile << \textcolor{stringliteral}{"Creating Object Camera Object \(\backslash\)n"};
00040   Camera cam2(OBJCAMPORT);
00041 
00042   logfile << \textcolor{stringliteral}{"Taking a Picture: \(\backslash\)n"};
00043   cam2.Capture();
00044 
00045   logfile << \textcolor{stringliteral}{"Retrieving the Image \(\backslash\)n"};
00046   logfile << \textcolor{stringliteral}{"Image Specs: \(\backslash\)n"}
00047           << \textcolor{stringliteral}{"========================="}
00048           << \textcolor{stringliteral}{"Is Empty:       "} << testimage.empty() << endl
00049           << \textcolor{stringliteral}{"Dimensionality: "} << testimage.dims << endl
00050           << \textcolor{stringliteral}{"Pixel Format:   "} << testimage.depth() << endl
00051           << \textcolor{stringliteral}{"Size:           "} << testimage.size << endl
00052           << endl
00053           << endl;
00054 
00055   \textcolor{keywordflow}{if} (testimage.empty() || !testimage.size)
00056     Passed = \textcolor{keyword}{false};
00057   \textcolor{keywordflow}{else}
00058     Passed = \textcolor{keyword}{true};
00059 
00060   \textcolor{keywordflow}{return} Passed;
00061 \}
00062 
00063 \textcolor{keywordtype}{bool} Test::LaneDetectionTest(string filename)
00064 \{
00065 
00066   \textcolor{keywordtype}{bool} passed = \textcolor{keyword}{true};
00067 
00068   LaneDetector ld;
00069 
00070   logfile << \textcolor{stringliteral}{"Opening Image: << filename << endl"};
00071   Mat testmat = imread(filename); \textcolor{comment}{// load the sample image to test and compare}
00072 
00073   logfile << \textcolor{stringliteral}{"Retrieving the Image \(\backslash\)n"};
00074   logfile << \textcolor{stringliteral}{"Image Specs: \(\backslash\)n"}
00075           << \textcolor{stringliteral}{"========================="} << endl
00076           << \textcolor{stringliteral}{"Is Empty:       "} << testmat.empty() << endl
00077           << \textcolor{stringliteral}{"Dimensionality: "} << testmat.dims << endl
00078           << \textcolor{stringliteral}{"Pixel Format:   "} << testmat.depth() << endl
00079           << \textcolor{stringliteral}{"Size:           "} << testmat.size << endl << endl;
00080 
00081   \textcolor{keywordflow}{if} (!testmat.size || testmat.empty())
00082     passed = \textcolor{keyword}{false};
00083 
00084   logfile << \textcolor{stringliteral}{"Creating Empty Lane Array: Lanes Full of Zeros \(\backslash\)n"};
00085   array<Lane, 4> testlanes = \{Lane(\{0, 0\}), Lane(\{0, 0\})\};
00086 
00087   logfile << \textcolor{stringliteral}{"Detecting Lanes: \(\backslash\)n"};
00088 
00089   uint32\_t numlanes = LaneDetector::DetectLanes(testlanes, testmat);
00090   ld.DetectLanes(testmat);
00091 
00092   logfile << \textcolor{stringliteral}{"Printing Lanes: \(\backslash\)n"};
00093   logfile << \textcolor{stringliteral}{"Total Lanes Found: Static Call: "} << numlanes
00094           << \textcolor{stringliteral}{" Object Call: "} << ld.GetNumLanes() << endl;
00095 
00096   logfile << \textcolor{stringliteral}{"Static Lanes: "} << endl;
00097   \textcolor{keywordflow}{for} (Lane lane : testlanes)
00098     logfile << lane;
00099 
00100   logfile << \textcolor{stringliteral}{"Object Lanes: "} << endl;
00101   \textcolor{keywordflow}{for} (Lane lane : ld.GetLanes())
00102     logfile << lane;
00103 
00104   \textcolor{keywordflow}{return} passed;
00105 \}
00106 
00107 \textcolor{keywordtype}{bool} Test::LIDARTest() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}
00108 
00109 \textcolor{keywordtype}{bool} Test::GPSTest() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}
00110 
00111 \textcolor{keywordtype}{bool} Test::SensorsTest() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}
00112 
00113 \textcolor{keywordtype}{bool} Test::MotorTest() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}
00114 
00115 \textcolor{keywordtype}{bool} Test::ObjectDetectionTest() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}
00116 
00117 \textcolor{keywordtype}{bool} Test::RunAllTests()
00118 \{
00119 
00120   \textcolor{keywordtype}{bool} senstest = SensorsTest();
00121   \textcolor{keywordtype}{bool} motortest = MotorTest();
00122   \textcolor{keywordtype}{bool} ldtest = LaneDetectionTest(\textcolor{stringliteral}{"../test/test.jpeg"});
00123   \textcolor{keywordtype}{bool} odtest = ObjectDetectionTest();
00124   \textcolor{keywordtype}{bool} gpstest = GPSTest();
00125   \textcolor{keywordtype}{bool} lidartest = LIDARTest();
00126   \textcolor{keywordtype}{bool} camtest = CameraTest();
00127 
00128   cout << \textcolor{stringliteral}{"Sensor Test: "} << ((senstest) ? \textcolor{stringliteral}{"PASSED\(\backslash\)n"} : \textcolor{stringliteral}{"FAILED\(\backslash\)n"});
00129   cout << \textcolor{stringliteral}{"Camera Test: "} << ((camtest) ? \textcolor{stringliteral}{"PASSED\(\backslash\)n"} : \textcolor{stringliteral}{"FAILED\(\backslash\)n"});
00130   cout << \textcolor{stringliteral}{"Motor Test: "} << ((motortest) ? \textcolor{stringliteral}{"PASSED\(\backslash\)n"} : \textcolor{stringliteral}{"FAILED\(\backslash\)n"});
00131   cout << \textcolor{stringliteral}{"GPS Test: "} << ((gpstest) ? \textcolor{stringliteral}{"PASSED\(\backslash\)n"} : \textcolor{stringliteral}{"FAILED\(\backslash\)n"});
00132   cout << \textcolor{stringliteral}{"LIDAR Test: "} << ((lidartest) ? \textcolor{stringliteral}{"PASSED\(\backslash\)n"} : \textcolor{stringliteral}{"FAILED\(\backslash\)n"});
00133   cout << \textcolor{stringliteral}{"Lane Detection Test: "} << ((ldtest) ? \textcolor{stringliteral}{"PASSED\(\backslash\)n"} : \textcolor{stringliteral}{"FAILED\(\backslash\)n"});
00134   cout << \textcolor{stringliteral}{"Object Detection Test: "} << ((odtest) ? \textcolor{stringliteral}{"PASSED\(\backslash\)n"} : \textcolor{stringliteral}{"FAILED\(\backslash\)n"});
00135 
00136   \textcolor{keywordflow}{return} senstest && odtest && ldtest && motortest &&
00137          gpstest && lidartest && camtest;
00138 \}
\end{DoxyCode}
